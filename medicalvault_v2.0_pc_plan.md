# üìã MEDICALVAULT BOT v2.0 - PC EDITION

**H·ªá th·ªëng qu·∫£n l√Ω h·ªì s∆° thi·∫øt b·ªã y t·∫ø cho team 3-5 ng∆∞·ªùi**

- **Stack:** PC 24/7 + Docker + Gemini 2.0 + ChromaDB + Outline Wiki
- **Chi ph√≠:** 0ƒë ƒë·∫ßu t∆∞ + 100-300k/th√°ng API
- **Timeline:** 4-6 tu·∫ßn ‚Üí MVP live

---

## üéØ M·ª§C TI√äU & ROI

### V·∫•n ƒë·ªÅ hi·ªán t·∫°i
- 1500 files (3.7GB) l·ªôn x·ªôn trong Explorer/Drive.
- T√¨m brochure/specs ph·∫£i m√≤ 5-10 ph√∫t.
- G·ª≠i t√†i li·ªáu cho kh√°ch h√†ng ph·∫£i search manual.
- So s√°nh thi·∫øt b·ªã ph·∫£i m·ªü nhi·ªÅu file PDF.
- Kh√¥ng bi·∫øt gi√°/specs nhanh.

### Sau khi tri·ªÉn khai
- **Search 3 gi√¢y:** "m√°y xquang GE" ‚Üí list ƒë·∫ßy ƒë·ªß + specs + gi√°.
- **G·ª≠i kh√°ch h√†ng:** Copy link wiki ho·∫∑c export PDF t·ª± ƒë·ªông.
- **So s√°nh:** B·∫£ng specs 3-5 thi·∫øt b·ªã t·ª± ƒë·ªông generate.
- **Extract auto:** OCR ‚Üí gi√°, th√¥ng s·ªë ‚Üí MD file.
- **Remote:** Telegram search ·ªü m·ªçi n∆°i.

### ROI
- **Ti·∫øt ki·ªám:** 20-30 ph√∫t/ng√†y √ó 3 ng∆∞·ªùi = 1.5h/ng√†y.
- **Gi√° tr·ªã:** 30 gi·ªù/th√°ng √ó 500k/gi·ªù = 15 tri·ªáu/th√°ng.
- **Chi ph√≠:** 100-300k/th√°ng API.
- **ROI:** 50-150x.

---

## üèóÔ∏è KI·∫æN TR√öC ƒê∆†N GI·∫¢N H√ìA

```text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         PC 24/7 (Windows/Linux)         ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Docker      ‚îÇ    ‚îÇ File Watcher   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Compose     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§ (watchdog)     ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ         ‚îÇ                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  CORE SERVICES (containers)     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ ChromaDB (vector search)     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Outline Wiki (team UI)       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ FastAPI Backend              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ PostgreSQL (metadata)        ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Telegram Bot (remote)        ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  STORAGE (·ªï ph·ª•)                ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ /vault/raw/  (PDFs, files)   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ /vault/md/   (markdown DB)   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ /vault/backup/ (daily)       ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚îú‚îÄ‚îÄ‚ñ∫ Gemini 2.0 Flash (OCR + Extract)
           ‚îî‚îÄ‚îÄ‚ñ∫ Groq (classify nhanh, free tier)
```

**ACCESS:**
- **LAN:** `http://pc-ip:3000` (Outline Wiki)
- **Remote:** Telegram Bot (`@medvault_bot`)
- **Edit:** Obsidian sync v·ªõi `/vault/md/`

---

## üìÅ VAULT STRUCTURE (ƒê∆°n Gi·∫£n)

```text
D:/MedicalVault/              # ·ªî ph·ª• c·ªßa b·∫°n
‚îú‚îÄ‚îÄ raw/                      # Files g·ªëc
‚îÇ   ‚îú‚îÄ‚îÄ Chan_doan_hinh_anh/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ X_quang/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ GE_Optima_XR220_brochure.pdf
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ GE_Optima_XR220_specs.xlsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ GE_Optima_XR220_price_2025.pdf
‚îÇ   ‚îî‚îÄ‚îÄ Sieu_am/
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ md/                       # Markdown database (Obsidian)
‚îÇ   ‚îú‚îÄ‚îÄ devices/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ X_quang_GE_Optima_XR220.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sieu_am_Mindray_DC70.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ device_template.md
‚îÇ   ‚îî‚îÄ‚îÄ _index/
‚îÇ       ‚îî‚îÄ‚îÄ by_category.md
‚îÇ
‚îú‚îÄ‚îÄ docker/                   # Docker configs
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îú‚îÄ‚îÄ .env
‚îÇ   ‚îî‚îÄ‚îÄ configs/
‚îÇ
‚îî‚îÄ‚îÄ backup/                   # Auto backup
    ‚îú‚îÄ‚îÄ 2026-02-13/
    ‚îî‚îÄ‚îÄ ...
```

---

## üìÑ MARKDOWN FILE STRUCTURE (Auto-Generate)

**File:** `md/devices/X_quang_GE_Optima_XR220.md`

```markdown
---
device_id: "xray-ge-optima-xr220"
model: "GE Optima XR220"
brand: "GE Healthcare"
category: "Ch·∫©n ƒëo√°n h√¨nh ·∫£nh/X-quang"
subcategory: "X-quang k·ªπ thu·∫≠t s·ªë DR"

# TH√îNG S·ªê K·ª∏ THU·∫¨T (Auto-extracted)
specs:
  power: "400mA"
  voltage: "150kV"
  detector: "CsI scintillator 17√ó17 inch"
  resolution: "3.5 lp/mm"
  
# GI√Å C·∫¢ (Auto-extracted)
pricing:
  price_range_vnd: [5200000000, 6500000000]
  last_updated: "2025-11-15"
  source: "Danh m·ª•c th·∫ßu BV B·∫°ch Mai"

# FILES ƒê√çNH K√àM
attachments:
  - file: "GE_Optima_XR220_brochure.pdf"
    type: "T√†i li·ªáu k·ªπ thu·∫≠t"
    pages: 24
    language: "en"
  - file: "GE_Optima_XR220_specs.xlsx"
    type: "B·∫£ng th√¥ng s·ªë"
  - file: "GE_Optima_XR220_price_2025.pdf"
    type: "B√°o gi√°"
    hospital: "B·ªánh vi·ªán B·∫°ch Mai"

# METADATA
created: "2026-02-13"
updated: "2026-02-13"
confidence: 0.95
status: "verified"
---

# GE Optima XR220 - X-quang K·ªπ Thu·∫≠t S·ªë DR

## üìä T√≥m T·∫Øt Nhanh
- **Lo·∫°i**: X-quang k·ªπ thu·∫≠t s·ªë (DR)
- **H√£ng**: GE Healthcare (M·ªπ)
- **Gi√° tham kh·∫£o**: 5.2-6.5 t·ª∑ VNƒê
- **·ª®ng d·ª•ng**: X-quang ch·ª•p ƒë·ª©ng + n·∫±m

## üîß Th√¥ng S·ªë K·ªπ Thu·∫≠t Chi Ti·∫øt

| Th√¥ng s·ªë | Gi√° tr·ªã |
|----------|---------|
| C√¥ng su·∫•t | 400mA |
| ƒêi·ªán √°p | 150kV |
| Detector | CsI 17√ó17 inch |
| ƒê·ªô ph√¢n gi·∫£i | 3.5 lp/mm |

## üí∞ L·ªãch S·ª≠ Gi√°

| Ng√†y | B·ªánh vi·ªán | Gi√° (VNƒê) | Ngu·ªìn |
|------|-----------|-----------|-------|
| 2025-11 | B·∫°ch Mai | 5,800,000,000 | G√≥i th·∫ßu BM-2025-123 |
| 2025-08 | 108 | 6,200,000,000 | ƒê·∫•u th·∫ßu r·ªông r√£i |

## üìé T√†i Li·ªáu ƒê√≠nh K√®m

- [Brochure k·ªπ thu·∫≠t](../raw/Chan_doan_hinh_anh/X_quang/GE_Optima_XR220_brochure.pdf) (EN, 24 trang)
- [B·∫£ng specs](../raw/Chan_doan_hinh_anh/X_quang/GE_Optima_XR220_specs.xlsx)
- [B√°o gi√° BV B·∫°ch Mai](../raw/Chan_doan_hinh_anh/X_quang/GE_Optima_XR220_price_2025.pdf)

## üè• B·ªánh Vi·ªán ƒê√£ Mua
- B·ªánh vi·ªán B·∫°ch Mai (2025)
- B·ªánh vi·ªán 108 (2025)

---
*Auto-generated by MedicalVault Bot | Last updated: 2026-02-13*
```

---

## ü§ñ WORKFLOW T·ª∞ ƒê·ªòNG

### 1. Nh·∫≠n File M·ªõi (3 c√°ch)
- **C√°ch 1:** ƒê·ªìng nghi·ªáp copy v√†o `/vault/raw/new/`
- **C√°ch 2:** G·ª≠i file qua Telegram Bot
- **C√°ch 3:** Upload qua Outline Wiki interface

### 2. Auto-Processing Pipeline
- **Step 1:** File Watcher ph√°t hi·ªán file m·ªõi
- **Step 2:** Gemini 2.0 Flash Vision OCR to√†n b·ªô ‚Üí Extract text + tables + images
- **Step 3:** Gemini 2.0 Flash Structured Output ‚Üí Parse th√†nh JSON
- **Step 4: HUMAN REVIEW** (Telegram notification) ‚Üí Confirm trong 5 ph√∫t ho·∫∑c auto-approve (confidence > 90%)
- **Step 5:** Generate/Update Markdown file
- **Step 6:** ChromaDB embedding ‚Üí Vector search ready
- **Step 7:** Outline Wiki sync
- **Step 8:** Move file: `/vault/raw/new/` ‚Üí `/vault/raw/classified/`
- **Step 9:** Telegram notify: "‚úÖ ƒê√£ x·ª≠ l√Ω PDF"

### 3. Search & Retrieve
- **USER ‚Üí Telegram:** `/search xquang ge`
- **ChromaDB:** Semantic search
- **Return:** List thi·∫øt b·ªã + specs/gi√°
- **USER:** "Chi ti·∫øt XR220" ‚Üí Bot g·ª≠i MD + PDF links

---

## üõ†Ô∏è TECH STACK CHI TI·∫æT

- **Core Backend:** FastAPI (Python), ChromaDB, PostgreSQL, Redis.
- **AI Services:** 
  - **Gemini 2.0 Flash:** OCR + Structured extraction (Cost: ~$0.075/1k tokens).
  - **Groq Llama 3.1:** Quick classify (Free tier).
  - **OpenAI GPT-4o-mini:** Backup.
- **Frontend & UI:** Outline Wiki (Self-hosted), Telegram Bot, Obsidian.
- **Infrastructure:** Docker Compose, Traefik (Reverse proxy), Rclone (Backup to Google Drive).

---

## üí∞ CHI PH√ç TH·ª∞C T·∫æ

- **ƒê·∫ßu t∆∞ ban ƒë·∫ßu:** 0 VNƒê (S·ª≠ d·ª•ng PC & ·ªï c·ª©ng c√≥ s·∫µn).
- **V·∫≠n h√†nh th√°ng:** ~250k VNƒê.
  - Gemini API: 150-200k.
  - ƒêi·ªán PC: 50k.
  - Backup & Domain: 0ƒë (Free tier).

---

## üóìÔ∏è ROADMAP 6 TU·∫¶N (Th·ª±c T·∫ø)

- **TU·∫¶N 0-1: Setup Infrastructure**
  - Install Docker, setup folders, Docker Compose (Postgres/Redis), backup script.
- **TU·∫¶N 2: Core Search ‚≠ê**
  - Deploy ChromaDB, embed 1500 files, FastAPI search endpoint. 
  - *Chi ph√≠:* ~3tr VNƒê cho l·∫ßn ƒë·∫ßu embed.
- **TU·∫¶N 3: Outline Wiki ‚≠ê**
  - Deploy Wiki, import MD m·∫´u, config permissions, access qua Cloudflare Tunnel.
- **TU·∫¶N 4: Auto Extract + MD Generator ‚≠ê‚≠ê‚≠ê**
  - Gemini 2.0 integration, Template generator, Human review workflow.
- **TU·∫¶N 5: File Watcher + Auto Pipeline**
  - Python watchdog, Queue system (Redis), Error handling.
- **TU·∫¶N 6: Telegram Bot + Polish**
  - Build Telegram commands, custom Wiki theme, documentation. **MVP HO√ÄN THI·ªÜN ‚úÖ**

---

## üì± USER EXPERIENCE (MVP)

- **ƒê·ªìng Nghi·ªáp (View Only):** V√†o Wiki ‚Üí Search ‚Üí Click thi·∫øt b·ªã ‚Üí Export PDF g·ª≠i kh√°ch.
- **B·∫°n (Admin):** Drop file v√†o folder ‚Üí Ki·ªÉm tra Telegram ‚Üí Confirm ‚Üí Obsidian t·ª± update.
- **Remote (Anywhere):** D√πng Telegram Bot `/search` ƒë·ªÉ l·∫•y th√¥ng tin t·ª©c th√¨.

---

## üîç T√çNH NƒÇNG CHI TI·∫æT

1. **Semantic Search:** Hi·ªÉu ng·ªØ nghƒ©a "m√°y xquang gi√° r·∫ª d∆∞·ªõi 5 t·ª∑".
2. **Smart Extract:** Gemini 2.0 parse PDF theo JSON schema ƒë·ªãnh s·∫µn.
3. **Compare Mode:** So s√°nh specs/gi√° gi·ªØa c√°c model (e.g., `/compare xr220 vs xr656`).
4. **Auto-Tag & Category:** T·ª± ƒë·ªông ph√¢n lo·∫°i d·ª±a tr√™n n·ªôi dung file.
5. **Audit Trail:** Log m·ªçi h√†nh ƒë·ªông search, xem, export trong PostgreSQL.

---

## üîí B·∫¢O M·∫¨T (ƒê∆°n Gi·∫£n H√≥a Phase 1)

- **MVP:** Password protection cho Wiki, Whitelist Telegram IDs, LAN only, Daily backup.
- **Sau MVP:** Cloudflare Tunnel (HTTPS), Audit logs chi ti·∫øt, MFA.

---

## üöÄ DEPLOYMENT GUIDE (Simplified)

### 1. Prerequisites
- Install Docker Desktop (Windows) ho·∫∑c Engine (Linux).
- T·∫°o folder structure: `D:/MedicalVault/{raw,md,docker,backup}`.

### 2. Start Services
1. T·∫°o file `docker-compose.yml` v√† `.env` v·ªõi c√°c API key (Gemini, DB password).
2. Ch·∫°y `docker-compose up -d`.

---

## üìä SUCCESS METRICS

- **Tu·∫ßn 1-2:** Containers ch·∫°y stable, Search API ho·∫°t ƒë·ªông.
- **Tu·∫ßn 3-4:** Embed ƒë·ªß 1500 files, search accuracy > 85%.
- **Tu·∫ßn 6:** MVP Live, search time < 3s, team satisfaction cao.

---

## üéØ PHASE SAU MVP (Tu·∫ßn 7+)

- **Phase 2:** Advanced Features (Multi-device compare, Price tracking).
- **Phase 3:** Compliance (Audit trail, retention policy).
- **Phase 4:** Scale (Migrate sang NAS n·∫øu data > 10TB).

---

## ‚ö†Ô∏è R·ª¶I RO & MITIGATION

- **PC ch·∫øt:** UPS + Daily backup sang Cloud/HDD.
- **Gemini API limit:** Fallback sang Groq/GPT-4o-mini.
- **OCR sai:** Human review queue.
- **Data loss:** Tu√¢n th·ªß quy t·∫Øc backup 3-2-1.

---

## üéâ K·∫æT LU·∫¨N

**T·∫°i sao ch·ªçn v2.0 PC Edition cho MVP?**
- ƒê·∫ßu t∆∞ 0ƒë so v·ªõi 65tr c·ªßa b·∫£n NAS.
- Timeline ch·ªâ 6 tu·∫ßn thay v√¨ 11 tu·∫ßn.
- Ph√π h·ª£p ho√†n h·∫£o cho quy m√¥ 3-5 users v√† 1500 files.

**Next Steps:**
- Tu·∫ßn n√†y: Setup Docker tr√™n PC.
- Tu·∫ßn 1: B·∫Øt ƒë·∫ßu build Core Search.
